#!/usr/bin/env node

/**
 * TCP代理程序.
 */
var trace = require('../libs/trace');
var model = require('../models/proxy');
var proxyServer = require('../service/proxy/server');

//获取当前代理机信息.
model.getProxyServerInfo((err, result)=> {
    if (err) {
        trace.error(err, 'proxy-program start error.');
        process.exit();
    }

    //start proxy server.
    proxyServer.start(result);

    //start http server.
    require('./www');
});